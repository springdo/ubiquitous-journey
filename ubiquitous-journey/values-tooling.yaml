# Over rides for default values in Helm Charts
destination: &ci_cd_ns my-ci-cd

##############
# üõé Jenkins Custom Values
#############
jenkins_values: &jenkins_values
  source_secrets: {}
  sealed_secrets:
    - name: git-auth
      password: AgAD+uOI5aCI9YKU2NYt2p7asGq9ap+ZVcbIehPDiWxzKj9dUtWs5bWystDAOm7Z9MJvbePPEU8yka89nK9LC7JlU6HhQMwpcX7d23E2KqKz/Xr9pDM38Y93qqHkfS8jRnLPC7nvhGrMuoNEdKp2TCrrRK7Q3MK3AoZqk7Ea5Dqhq4s/WDyL50KppULkTzI3iX2wWr6X6TjxH122SOUSo1m5lzKFOe7hiuSp8V0w+xBaHv31Th2tr5JuxOoE6f/TT9eOxE0mtP1YKcy4c8HYgsO+H0R576ui3Mf/iLOgSyF65HgK5bU69gSqhE3yH3g0dDwiRjndfgeolEOGhJu1oI916GJUtmiFE981WEMM+P+OnB6ZmXOGBVOLTxnbLazhnvg3usVJ5Q8mQGSCJl/yg1SolTqqC/uIgekjhT2bwUmcnLj3f0uSt29g/aCWgDarT+nNE+vJG6tQrOrOSZCBDBC0SKWHNWfWh3pn16TqNQGUXmRV+n38fiJnOH38N6KzZ+ScXpsMcRp+oX2A9rlgtorhBQKsOfrPUAx3XYubr/JN27JC8Ey4S/67P3m4HXaNZe+/WgvLowGozSGctgClBesSUG3dzr5xYma8iCh1WMjC7jmLzXy/Zz/voc3SIJX7n03I+BL3AlafrB6QSNNTNQE/KFBmUoSp43hQ7Vcr9qomd3G+5GWfiNgo71S1KA4A3ZOb3u+NcA==
      username: AgCmeFkNTa0tOvXdI+lEjdJmV5u7FVUcn86SFxiUAF6yBqbaVj46T1u3tFo7BUVSkfi4QfAlo7QXAmI6c0m1NlDOjMfcQ1TWCGBe1/Q2PKnb+hcGI9SsMlXz2PnCNTTY+HNlntijtfCSDIh3LIot02dGGV7kic93m4NZTsTY+nlaeoOM3pHfQtDzd/enEi5xWctGp3vKp6OcoJYX7QgQfFyCldJd0OYWNymRjjWNpywNVRC7uow/3ZLV4DBVZzE8erBwE4gVo34ozPjfZFpH2+zRQCYNGosA8eCk74tN56evy2xEjNOkTrxwPwPGyO8julHoPbYiPu0HEEqFlHFn2xyZ7E4p/eXZsex71eV3Q03mjjy47ibW/lKl54HiBtSCODlpJ1ba2DWTZbxgzlm0hQKLMmscQ2nqqlAvKgsnBZAA5CmS3jU+YJ5N+gfVstYIPVCEOy8gMjp+65+/tvkARSgziLUphDz5PKOXXZ3TPzJ7qX7YK+VmvCjkrrkKiTFrbA+qCaOw75DK1W3GLNVPdVtM6YnTtghVwxykKhfL0nLysZvR3ffJNDxnBbNa3S+xgEdplN6EWYuds0Rj8/jEcQILKAwhEdVPkkob9AAFgdImfaBLZH36IiEOLTWem9/5tMsphOz82tERvMAuVMhbFFCUjZPTutoC3WeS1m9rYAkHDnqbTvQtqCI2vMej7kGJbEjjfLtbVA==
    - name: nexus-password
      password: AgCt5eaBg2CmXkwlPOsCyzsUu/6FxP7VH/YnKVv+eSHnR397KQCfz0X3JASRCKZvIRUIJPJMHb9rjaJ/g9EM4v1GSbIP5KW7gL1DMUSoeHtU69+9A7QYB9VF3PbGPS7vhPaxjBN7PLp4ulkgb9j4TLHb8+sQR7zLykr/mF5YeaYpwYwlsa3+s7SAkvIpdq9gMzZN8LORfhcrJCOp7WVKDRBxYSHv1OtQVWR4xPL6hyFjkELhiiGI3LStSNChr6uHFu6WEJT/CIxql45qaczieZU+uRJ3klVQUQ7V+XvhUIRIyB3I/AfDyBmXcYBXSIukkFWF5+WeI07iKeTkGoWHy5aGkY+Cn8Ts1y3fHBtaCLI1H+MNol0APWrt4QzLhoLRQEi9d6R0D5pe5F9PAj6zcTbQPrZ1S1318smM7Y5KKh+7QpX5okSYKt4wJUu6YE+QpadhvNVwGt5UYIZiDx3QtsUs2Vs7EvDKRjZxNomqSqcjIaF/Pgf/o6TvHxNYnZVTD/yDpJjKoKWkf2pFGZsbLMZLhnNSfeQnBgSGIrFQDMZF4ekt1DPGE/pPOzbbrJM2nCsXFo1ult6nID7zb45rNO0ao1ciQbrWA4VMHeBVmlWXGsSAqHZqDYf9PonFsK8KKVfV1wtlbzx5awwvacBC3feuaFd9zemL/Hk0xzfJ7pT8pSEOBYf+Yx6GYAFMoai4UnGz7NN0wVqt4A==
      username: AgBgnWfOMW4OjZiNjoT0ziWNVCVYc7QrSGxQtj7+xNa0YTYzgm5fFrIavatfCLkerLvbIrRfIhfw47G0Wb/aLhXtDFuGhO9p+ZU3cSTyhvhUdATbKWOFvvhfnua4g8mchdi5bT70Wo8xlvdyCPk7nz8iyADZMIN1BhaJZihzUgdxlMXJwFWL7dD1XmVbtVLYuCe4NZWWyIco8ytclD53VI0zwK/SdzwcRxVPV2Yp29hJ9s51lgtLOPQasG1HcrN9nfl0XO/ts+CsEuqdQgg0wKBNWF2oTnLqhBH4T+w2sczZ9mdOWt//JjTuCObb6/b3LGCbNHj8KVvIL1/dIO+nQj+dpJ6sLFdJNVG4XA2TwiLVEJ6pKvwn7NyMSGPEb/Lq0654EZtwbcv4Sb4PCM1j4PtN64WBRITSku4dt1ey/SVVVI4vM0Xfb1qqnryPxdNzJ4q1JnmP/gfJobOAwwHSs/Si7UKA3M67w52LztNNgncUVDB7Ol5P+kGVsxL0S5ODJutYtEHs8ltPeaagYEg68PNgTv8vsnXIIwpGr3cu9XYWZWt8zJapJmXPP1icuLePu4G1CQ9m1bzuEllMiMLRX4/l778gESKOzIBHyQeICPQW4IY8Oa3kl44n2SaB4l8I+C+ODoVn0+aM9EWr+8tuDyWX44C8+eNW6Qu+nUczUxVLMU226Vg2fyOEn48C2bh75dE84qpxdA==
    - name: argocd-token
      password: AgCT9eoNmKj0UaoWeqOQqDqGaT2PI/w+ke3kntL+54DVoCB5wLWYZ5Ia7NIRM+0tvsixOA306E+FXYW1klNU6R/nDPidWEaLdHKbs1w0dcjJNVaIE22OzelKHxh+uAS1czg9vBcDIb3mfRSwmT2ZJ0NRhf32O/cTFC3sJyCFEiZ/g6BwcD9r134ReYBS92Q6sHOXwd9MOTMlLwqzfAgtGaDtSx/jrawNxabmAyBYypFRHKybZXJGkj0T+heiXs0Bt6YItaKIG+o06esyYwJ0FIc7H3r9VNs7ydzBTm1m9pMpc9enNJ0Ibsu9XxK0bjGu1rOV/Bz2z+nZbcBiFJs814Rpr15qU2t2yeqHI3sndraytpq7JnHjiPsQt0hKJS1fZCF6Oz0odu/IDFEf9D8cvT778cq80eQX/8/O/pP3bzcucybBgQC4ahH07bjMuQiACweCQlp1uRbk295Y5+3tIRCjXeGU4wJ39GKW6LaXEX2jeeqkKur0z7cljdYomL/mLWDCDGMdxThlUdzWVKfDf/Y81Rg2cTOglyMfiakL4KeAAJFeN6KGTby/GGXwOj3LJkE8nawGd4d/haLVIjqQS8esjunxO2L71Cr4MSmcIUhNNX9pCMWxsnMqmVH4yCW47zIzV+Wa/Y22dA1AIkAgLMTPNrUmCgdAklVgol3q2OLfyqQ4cxXrbTweMSKP4jxBmnoRZi7Hy1cbaQ==
      username: AgAtWXZvxiNlVYdd1v5jWje67sI1v5rkHK+3ArEqVXk4HRcxrigbjiRAlw8bGxTPE56dBzc10fUhplW1cgLF7KNPjJbTc3L29utbtJUNKnrsSFIoNjaiY++TQEOwuRVYpcHNK83AFzEK4Hm8Rt0eN9ix0hk5Ja438P+dMDIbKhCamK6SavRfBDgJ2dS8L7il7ANYvY4THCEHvnD7Vbr9FXf7+0nu5sCoXGlOI+6U3ybpoAhHl5/bBN9BryenOCtF6vRw10MnCrUjvBalJSGvvYUEMc7RutKn37BTJDb2vCbbCVPDSL5g6e88zzUFPlahwr+taxOBfSNZvdOb7kg9HsFd62C7YW3ZQJu9OE4TaLP9+boaVNF4q1tfff9+CD3yZntJsh6qc5I9m0kBb0pPXaK/KKtUfuivFJZUeihCZ/jXgSymNebqxCsS+yYCpW0eahgdacWFTX2ydifjPlY4FBtjmU2qfwI7/73MUTh+4Yfy1AkcBIPGpsiBd0cUpVjusuRvC9xFJzkIxYPVlImNq36QhITqVdvPiUF58wMvzPcXv02eK13LSWR+bJfP2VYpurN10lVbDi1IPG0+gku77PuM/zD0Ujvyvn3siq+T0wvWu1rukjc1wys4x3HILcSEYCRQQJRm6CMxuC9JkrK9nNj7IdGM3pkOBjRJiplo9592BXjQW3BKTkX2ezPMsQaofPPiMxGFQw==

##############
# üõé Pact Broker Custom Values
#############
pact_broker_values: &pact_broker_values
  secrets:
    name: pact-broker-secrets
    keys:
      pactBrokerDatabaseUsername: pact_broker_database_username
      pactBrokerDatabasePassword: pact_broker_database_password
      pactBrokerAdmin: pact_broker_admin
      pactBrokerAdminPassword: pact_broker_admin_password
      pactBrokerBasicAuthUsername: pact_broker_user
      pactBrokerBasicAuthPassword: pact_broker_user_password
    values:
      pactBrokerDatabaseUsername: pact_broker_user
      pactBrokerDatabasePassword: thisisdefinitelynotmypassword
      pactBrokerAdmin: admin
      pactBrokerAdminPassword: thisisdefinitelynotmypassword
      pactBrokerBasicAuthUsername: dev
      pactBrokerBasicAuthPassword: thisisdefinitelynotmypassword

##############
# üõé Zalenium Custom Values
#############
## TODO: Update source URL as upstream when ArgoCD version is greater 1.5.0 or above
zalenium_values: &zalenium_values
  hub:
    serviceType: ClusterIP
    openshift:
      deploymentConfig:
        enabled: true
      route:
        enabled: true
    persistence:
      enabled: false
    serviceAccount:
      create: false
    desiredContainers: 0
    podAnnotations:
      app: zalenium

##############
# üõé Hoverfly Custom Values
# Values reference https://github.com/helm/charts/tree/master/incubator/hoverfly
#############
hoverfly_values: &hoverfly_values
  replicaCount: "1"
  openshift:
    route:
      admin:
        enabled: true
        hostname: ""
      proxy:
        enabled: true
        hostname: ""

##############
# üõé Wekan Custom Values
# Values reference https://github.com/wekan/wekan/tree/master/helm/wekan
#############
wekan_values: &wekan_values
  service:
    type: ClusterIP
  autoscaling:
    enabled: false
  mongodb-replicaset:
    replicas: 1
    securityContext:
      runAsUser: ""
      fsGroup: ""
  ingress:
    enabled: false
  route:
    enabled: true

##############
# üõé Mattermost Custom Values
# Values reference https://github.com/mattermost/mattermost-helm
#############
mattermost_values: &mattermost_values
  route:
    enabled: true
  mysql:
    mysqlRootPassword: "mysqlpass"
    mysqlUser: "mattermost"
    mysqlPassword: "matterpass"

##############
# üõé Owncloud Custom Values
#############
owncloud_values: &owncloud_values
  route:
    enabled: true
  hostname: owncloud.apps.hivec.sandbox1559.opentlc.com

#######################
# Vault Custom Values #
#######################
vault_values: &vault_values
  global:
    tlsDisable: false
  injector:
    enabled: false
  openshift: true
  server:
    route:
      host: '""'
    standalone:
      config: |
        ui = true
        listener "tcp" {
          address = "[::]:8200"
          cluster_address = "[::]:8201"
          tls_cert_file = "/var/run/secrets/kubernetes.io/certs/tls.crt"
          tls_key_file = "/var/run/secrets/kubernetes.io/certs/tls.key"
        }
        storage "file" {
          path = "/vault/data"
        }

##############
# üêô Argo Ignore Differences
#############
jenkins_ignore_differences: &jenkins_ignore_differences
  ignoreDifferences:
  - group: apps.openshift.io
    kind: DeploymentConfig
    jsonPointers:
    - /spec/template/spec/containers/0/image
    - /spec/triggers/0/imageChangeParams/lastTriggeredImage
  - group: build.openshift.io
    kind: BuildConfig
    jsonPointers:
    - /spec/triggers

nexus_ignore_differences: &nexus_ignore_differences
  ignoreDifferences:
  - group: route.openshift.io
    kind: Route
    jsonPointers:
    - /status/ingress

hoverflyignore_differences: &hoverfly_ignore_differences
  ignoreDifferences:
  - group: route.openshift.io
    kind: Route
    jsonPointers:
    - /status/ingress
    - /spec/host
  - group: apps/v1
    kind: Deployment
    jsonPointers:
    - /spec/replicas

crw_ignore_differences: &crw_ignore_differences
  ignoreDifferences:
  - group: org.eclipse.che
    kind: CheCluster
    jsonPointers:
    - /spec

dev-ex-dashboard_ignore_differences: &dev-ex-dashboard_ignore_differences
  ignoreDifferences:
  - group: apps.openshift.io
    kind: DeploymentConfig
    jsonPointers:
    - /spec/template/spec/containers/0/image
    - /spec/triggers/0/imageChangeParams/lastTriggeredImage
  - group: ''
    kind: ConfigMap
    jsonPointers:
    - /data

owncloud_ignore_differences: &owncloud_ignore_differences
  ignoreDifferences:
  - group: apps.openshift.io
    kind: DeploymentConfig
    jsonPointers:
    - /spec/template/spec/containers/0/image
    - /spec/triggers/0/imageChangeParams/lastTriggeredImage

vault_ignore_differences: &vault_ignore_differences
  ignoreDifferences:
  - group: route.openshift.io
    kind: Route
    jsonPointers:
    - /status/ingress
    - /spec/host

##############
# üêô Argo Sync Policy
#############
sync_policy_true: &sync_policy_true
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
      validate: true

sync_policy_no_selfheal: &sync_policy_no_selfheal
  syncPolicy:
    automated:
      prune: true
      selfHeal: false
      validate: true

##############
# üõé Argo App of Apps declaration
#############

# enabled true on an app is to tell helm to create an argo app cr for this item
applications:
  - name: nexus
    enabled: true
    source: https://rht-labs.github.io/helm-charts/
    chart_name: sonatype-nexus
    source_path: ""
    source_ref: "0.0.1"
    sync_policy:
      *sync_policy_true
    destination: *ci_cd_ns
    ignore_differences: *nexus_ignore_differences
  - name: jenkins
    enabled: true
    source: https://github.com/rht-labs/helm-charts.git
    source_path: charts/jenkins
    source_ref: "feature/jenkins-sealed-secrets"
    sync_policy:
      *sync_policy_true
    destination: *ci_cd_ns
    values:
      *jenkins_values
    ignore_differences: *jenkins_ignore_differences
  - name: pact-broker
    enabled: true
    source: https://github.com/rht-labs/helm-charts.git
    source_path: charts/pact-broker
    source_ref: "pact-broker-0.0.2"
    sync_policy:
      *sync_policy_true
    destination: *ci_cd_ns
    values:
      *pact_broker_values
  - name: sonarqube
    enabled: true
    source: https://github.com/rht-labs/helm-charts.git
    source_path: charts/sonarqube
    source_ref: "sonarqube-0.0.4"
    sync_policy:
      *sync_policy_true
    destination: *ci_cd_ns
  - name: zalenium
    enabled: true
    source: https://github.com/zalando/zalenium.git
    source_path: charts/zalenium
    source_ref: "master"
    sync_policy:
      *sync_policy_true
    destination: *ci_cd_ns
    values:
      *zalenium_values
  - name: hoverfly
    enabled: true
    source: https://github.com/helm/charts.git
    source_path: incubator/hoverfly
    sync_policy:
      *sync_policy_true
    destination: *ci_cd_ns
    source_ref: "master"
    values:
      *hoverfly_values
    ignore_differences: *hoverfly_ignore_differences
  - name: wekan
    enabled: true
    source: https://github.com/wekan/wekan.git
    source_path: helm/wekan
    sync_policy:
      *sync_policy_true
    destination: *ci_cd_ns
    source_ref: "v4.01"
    values:
      *wekan_values
